<html xmlns="http://www.w3.org/1999/xhtml" lang="en"
      xmlns:v="http://typo3.org/ns/FluidTYPO3/Vhs/ViewHelpers"
      xmlns:f="http://typo3.org/ns/TYPO3/Fluid/ViewHelpers"
      onload="changeColorOfRow()">
    <f:be.container includeCssFiles="{0: '{f:uri.resource(path:\'Css/style.css\')}'}" includeJsFiles="{0: '{f:uri.resource(path:\'Js/script.js\')}'}">
        <f:render partial="Module_Header" arguments="{template: 'structure'}"/>
        <div class="tx_dj_imagetools module-body t3js-module-body">
            <h2><f:translate key="LLL:EXT:dj_imagetools/Resources/Private/Language/locallang_mod.xlf:structure"/></h2>
            <f:flashMessages />
            <f:if condition="{imagick}">
                <f:then>
                    <table border="1" class="table table-striped table-hover">
                        <thead>
                            <tr>
                                <th></th>
                                <th><f:translate key="LLL:EXT:dj_imagetools/Resources/Private/Language/locallang_mod.xlf:metaData.reference"/></th>
                                <th><f:translate key="LLL:EXT:dj_imagetools/Resources/Private/Language/locallang_mod.xlf:structure.difference"/></th>
                            </tr>
                        </thead>
                        <tbody>
                            <f:for each="{files}" as="file" iteration="objIterator">
                                <f:form controller="Structure" action="list" name="selectedfile" object="{file}">
                                    <tr>
                                        <f:form.hidden property='identifier' value='{file.identifier}'/>
                                        <f:form.hidden property='uid' value='{file.uid}'/>
                                        <td><f:form.button type="submit" class="btn btn-primary" onclick="changeColorOfRow()"><i class='fa fa-folder-open'></i></f:form.button></td>
                                        <td>{file.identifier}</td>
                                        <td></td>
                                    </tr>
                                    <f:for each="{file.comparableFiles}" as="comarableFile">
                                        <tr class='sub {f:if(condition: "{selected.uid} == {file.uid}", then: "show")} color{comarableFile.2}'>
                                            <td></td>
                                            <td>{comarableFile.1}</td>
                                            <td>{f:if(condition: "{comarableFile.2} == 0", then: "0", else: "{comarableFile.2}")} %</td>
                                        </tr>
                                    </f:for>
                                </f:form>
                            </f:for>
                        </tbody>
                    </table>
                </f:then>
                <f:else>
                    <div class="alert alert-danger">
                        <p><f:translate key="LLL:EXT:dj_imagetools/Resources/Private/Language/locallang_mod.xlf:structure.imagick.notLoaded"/></p>
                    </div>
                </f:else>
            </f:if>
        </div>
    </f:be.container>
</html>